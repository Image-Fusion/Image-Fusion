{% extends 'index.html' %}

{% block body %}
    {% if user.is_authenticated %}
        <!-- body of image_processing page -->

            <!-- Display User uploaded Images -->
                <div class='container mt-5 mb-5 p-3 rounded bg-warning'>
                    <div class='rounded fw-bold mb-1 fs-3 text-black'>Your Uploaded Images</div>
                    <form action="{% url 'image-fusion' %}" method="POST">
                    {% csrf_token %}
                        <div class='container p-3 rounded bg-white' style='height:530px; overflow:auto;'>
                            {% if all_images %}
                                {% comment %} <div class='row mx-auto'>
                                    <div class='p-2 rounded bg-white fs-5'> 
                                        <label for="select_all">
                                            <input type="checkbox" id="select_all"/> Select All Images
                                        </label>
                                    </div>
                                </div> {% endcomment %}
                                <div class='row'>
                                    {% for i in all_images %}
                                            <div class='col-md-3 col-sm-6 col-12'>
                                                <div class='card-img bg-dark p-2 m-1 rounded'>
                                                    <div>
                                                        <input type="checkbox" name="image_checkbox" value="{{i.id}}" id="{{i.id}}">
                                                    </div>
                                                    <a href="{{i.images.url}}">
                                                        <img src="{{i.images.url}}" alt="Image" width='100%' height='100%' class="rounded">
                                                    </a>
                                                    <div class='text-white mt-1 '>
                                                        <span class='bg-warning text-dark px-1 rounded'>Name</span>
                                                        <br/>
                                                        <span class='text-white px-1 rounded text-wrap'>{{i.images.name}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class='container-fluid bg-danger text-white fs-4 fw-bold p-1 rounded'>
                                    <center>You should <span class='bg-white text-danger rounded px-1'>Upload Images !</span></center>
                                </div>
                            {% endif %}
                        </div>
                        <div class='container mt-3 p-3 rounded bg-white'>
                            <button type="submit" class='bg-dark text-white rounded border-0 px-2 py-1'>Start Image Fusion</button>
                        </div>
                    </form>
                </div>
            <!-- Display User uploaded Images -->

            <!-- Display Fused Image -->
                <div class='container mt-5 mb-5 p-3 rounded bg-warning'>
                    <div class='rounded fw-bold mb-1 fs-3 text-black'>Fused Image</div>
                    <div class='container p-3 rounded bg-white' style='height:530px; overflow:auto;'>
                        {% if fused_image %}

                        {% else %}
                            <div class='container-fluid bg-warning text-dark fs-4 fw-bold p-1 rounded'>
                                <center>You should <span class='bg-white text-dark rounded px-1'>SELECT IMAGES</span> for Image Fusion !!!</center>
                            </div>
                        {% endif %}
                    </div>
                </div>
            <!-- Display Fused Image -->

        <!-- body of image_processing page -->
    {% endif %}
{% endblock body %}